<!--
 This XML file is the "command center" of your compiler.
 Here, we define the structure of the abstract syntax tree as well as the 
 traversals to process it.
-->

<?xml-stylesheet href="ast.html.xsl" type="text/xsl" name="HTML" media="screen"?>
<definition version="0.9" >

<!--
  =========================================================================
-->

  <attributetypes>
    <type name="String" ctype="char*" init="NULL" copy="function" />
    <type name="Int" ctype="int" init="0" copy="literal" />
    <type name="Bool" ctype="bool" init="FALSE" copy="literal" />
    <type name="Float" ctype="float" init="0.0" copy="literal" />
    <type name="RelOp" ctype="relop" init="RO_unknown" copy="literal" />
    <type name="LogicOp" ctype="logicop" init="LO_unknown" copy="literal" />
    <type name="ArithOp" ctype="arithop" init="AO_unknown" copy="literal" />
    <type name="UnOp" ctype="unop" init="UO_unknown" copy="literal" />
    <type name="Type" ctype="type" init="TY_unknown" copy="literal" />
    <type name="Link" ctype="node*" init="NULL" copy="lookup" />
    <type name="Void" ctype="void*" init="NULL" copy="lookup" /> <!-- Not sure this is how we want it, but for now it works. -->
    <type name="CompilerPhase" ctype="compiler_phase_t" init="PH_initial" copy="literal" />
  </attributetypes>

<!--
  =========================================================================
-->

  <phases>
    <!-- id is the short id of the traversal 
         name is a descriptive name
         default gives the default traversal mode
           user  a user defined function
           sons  TravSons
           none  TravNone
           error TravError
         include the include file needed for the traversal
    -->
    <general>
      <traversal id="PRT" name="Print Syntax Tree" default="user" include="print.h" />
      <traversal id="COPY" name="Copy Syntax Tree" default="user" include="copy_node.h" />
      <traversal id="FREE" name="Free Syntax Tree" default="user" include="free_node.h" />
      <traversal id="CHK" name="Check Syntax Tree" default="user" include="check.h" />

      <traversal id="RI" name="Rename identifiers" default="sons" include="rename_identifiers.h">
        <travuser>
          <node name="Id" />
          <node name="VarDec" />
        </travuser>
      </traversal>

      <traversal id="SI" name="Sum ins" default="sons" include="sum_ints.h">
        <travuser>
          <node name="Num" />
        </travuser>
      </traversal>

      <traversal id="OS" name="Optimise subtraction" default="sons" include="opt_sub.h">
        <travuser>
          <node name="BinOp" />
        </travuser>
      </traversal>

    </general>
  </phases>

<!--
  =========================================================================
-->

  <nodesets>
     <nodeset name="Declaration">
      <target>
        <node name="FunDec"/>
        <node name="FunDef"/>
        <node name="GlobalDec"/>
        <node name="GlobalDef"/>
      </target>
    </nodeset>
    
    <nodeset name="GlobalDef">
  	  <target>
  	    <node name="GlobalVarDef"/>
  	    <node name="GlobalArrDef"/>
  	  </target>
  	</nodeset>
    
    <nodeset name="RetType">
  	  <target>
  	    <node name="Void"/>
        <node name="Bool"/>
        <node name="Int"/>
        <node name="Float"/>
  	  </target>
  	</nodeset>
  	
  	<nodeset name="Type">
  	  <target>
        <node name="Bool"/>
        <node name="Int"/>
        <node name="Float"/>
  	  </target>
  	</nodeset>
  	
  	<nodeset name="BasicType">
  	  <target>
  	    <node name="Bool"/>
  	    <node name="Int"/>
  	    <node name="Float"/>
  	  </target>
  	</nodeset>
  	
  	<nodeset name="Statement">
      <target>
        <node name="Assign" />
        <node name="Funcall"/>
        <node name="If" />
        <node name="While" />
        <node name="Do" />
        <node name="For" />
        <node name="Return" />
        <node name="ArrayAssign" />
      </target>
    </nodeset>
        
    <nodeset name="Block">
      <target>
        <node name="Statement" />
        <node name="Statements" />
      </target>
    </nodeset>
    
    <nodeset name="Expr">
      <target>
        <node name="Expr" />
        <node name="ArithOp" />
        <node name="RelOp" />
        <node name="LogicOp" />
        <node name="UnOp" />
        <node name="TypeCast" />
        <node name="Funcall" />
        <node name="Id" />
        <node name="Const" />
        <node name="Array" />
        <node name="IntConst" />
        <node name="FloatConst" />
        <node name="BoolConst" />
      </target>
    </nodeset>
    
    <nodeset name="ArrExpr">
      <target>
        <node name="ArrData" />
        <node name="Expr" />
      </target>
    </nodeset>
    
    <nodeset name="BinOp">
      <target>
        <node name="ArithOp" />
        <node name="RelOp" />
        <node name="LogicOp" />
      </target>
    </nodeset>
    
    <nodeset name="Id">
        <target>
            <node name="Id" />
            <node name="VarDec" />
        </target>
    </nodeset>

	<nodeset name="Const">
      <target>
        <node name="IntConst" />
        <node name="FloatConst" />
        <node name="BoolConst" />
      </target>
    </nodeset>
    
  </nodesets>

<!--
  =========================================================================
-->
  <syntaxtree>

<!--
 Node Program:
-->
     <node name="Program">
      <description>Represenst the program</description>
      <sons>
        <son name="Declaration">
          <description>First Declaration is mandatory</description>
          <targets>
            <target mandatory="yes">
              <node name="Declarations" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node Declarations:
-->
     <node name="Declarations">
      <description>Represents (sequence of) declarations</description>
      <sons>
        <son name="Declaration">
          <description>First declaration in sequence</description>
          <targets>
            <target mandatory="yes">
              <set name="Declaration" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Next">
          <description>Remaining declarations in sequence</description>
          <targets>
            <target mandatory="no">
              <node name="Declarations" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
    </node>

<!--
 Node Statements:
-->
     <node name="Statements">
      <description>Represents (sequence of) statements</description>
      <sons>
        <son name="Statement">
          <description>First statement in sequence</description>
          <targets>
            <target mandatory="yes">
              <set name="Statement" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Next">
          <description>Remaining statements in sequence</description>
          <targets>
            <target mandatory="no">
              <node name="Statements" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node FunDec:
-->
    <node name="FunDec">
      <description>Function Declaration</description>
      <sons>
        <son name="FunHeader">
          <description>Function Header</description>
          <targets>
            <target mandatory="yes">
              <node name="FunHeader" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
      </sons>
    </node>

<!--
 Node FunDef:
-->
    <node name="FunDef">
      <description>Function Definition</description>
      <sons>
        <son name="FunHeader">
          <description>Function Header</description>
          <targets>
            <target mandatory="yes">
              <node name="FunHeader" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="FunBody">
          <description>Function Body</description>
          <targets>
            <target mandatory="yes">
              <node name="FunBody" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Export">
          <description>Export keyword flag</description>
          <type name="Bool">
            <targets>
	          <target mandatory="yes">
	            <phases><all /></phases>
	          </target>
	        </targets>
          </type>
        </attribute>
      </attributes>
    </node>

<!--
 Node FunHeader:
-->
    <node name="FunHeader">
      <description>Function Header</description>
      <sons>
        <son name="RetType">
          <description>Returntype of function</description>
          <targets>
            <target mandatory="yes">
              <set name="RetType" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="Id">
          <description>Identifier of Function</description>
          <targets>
            <target mandatory="yes">
              <node name="Id" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="Params">
          <description>Parameters of the function, can be 0 or more</description>
          <targets>
            <target mandatory="no">
              <node name="Params" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
      </sons>
    </node>

<!--
 Node RetType:
-->
    <node name="RetType">
      <description>Return type</description>
    </node>

<!--
 Node GlobalDec:
-->
    <node name="GlobalDec">
      <sons>
        <son name="Type">
          <description>Type of variable</description>
          <targets>
            <target mandatory="yes">
              <set name="Type" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="ArraySize">
          <description>Size of array</description>
          <targets>
            <target mandatory="no">
              <node name="Ids" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="Id">
          <description>Identifier of variable</description>
          <targets>
            <target mandatory="yes">
              <node name="Id" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node GlobalDef:
-->
    <node name="GlobalDef">
      <sons>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node Type:
-->
    <node name="Type">
      <description>Type</description>
    </node>
    
<!--
 Node Int:
-->
    <node name="Int">
      <description>Int</description>
    </node>
    
<!--
 Node Float:
-->
    <node name="Float">
      <description>Float</description>
    </node>
    
<!--
 Node Bool:
-->
    <node name="Bool">
      <description>Bool</description>
    </node>
    
    
<!--
 Node Params:
-->
     <node name="Params">
      <description>Represents (sequence of) params</description>
      <sons>
        <son name="Param">
          <description>First param in sequence</description>
          <targets>
            <target mandatory="yes">
              <node name="Param" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Next">
          <description>Remaining params in sequence</description>
          <targets>
            <target mandatory="no">
              <node name="Params" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node Param:
-->
     <node name="Param">
      <description>Represents a parameter</description>
      <sons>
        <son name="Type">
          <description>Type of parameter</description>
          <targets>
            <target mandatory="yes">
              <set name="BasicType" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="ArraySize">
          <description>Size of array, if Param is an array, can be multidimensional</description>
          <targets>
            <target mandatory="no">
              <node name="Ids" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Id">
          <description>Identifier of the parameter</description>
          <targets>
            <target mandatory="Yes">
              <node name="Id" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node FunBody:
-->
     <node name="FunBody">
      <description>Function Body</description>
      <sons>
        <son name="VarDecs">
          <description>Variable declerations</description>
          <targets>
            <target mandatory="no">
              <node name="VarDecs" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="LocalFunDefs">
          <description>Block of local function definitions</description>
          <targets>
            <target mandatory="no">
              <node name="LocalFunDefs" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Statements">
          <description>Block of statements</description>
          <targets>
            <target mandatory="no">
              <node name="Statements" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node VarDecs:
-->
     <node name="VarDecs">
      <description>Represents (sequence of) VarDecs</description>
      <sons>
        <son name="VarDec">
          <description>First VarDec in sequence</description>
          <targets>
            <target mandatory="yes">
              <node name="VarDec" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Next">
          <description>Remaining VarDecs in sequence</description>
          <targets>
            <target mandatory="no">
              <node name="VarDecs" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node VarDec:
-->
     <node name="VarDec">
      <description>Variable declarations</description>
      <sons>
        <son name="Type">
          <description>Type of variable declaration</description>
          <targets>
            <target mandatory="Yes">
              <set name="Type" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="ArraySize">
          <description>Arraysize, can be multidimensional</description>
          <targets>
            <target mandatory="no">
              <node name="Exprs" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Id">
          <description>Identifier</description>
          <targets>
            <target mandatory="yes">
              <node name="Id" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Expr">
          <description>To be assigned expression</description>
          <targets>
            <target mandatory="no">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node Statement:
-->
    <node name="Statement">
      <description>Statement</description>
    </node>
    
<!--
  Node FunCall: 
 -->
    <node name="Funcall" >
      <sons>
        <son name="Id">
          <description>The name of the method to be called</description>
          <targets>
            <target mandatory="yes">
              <node name="Id" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Params">
          <description>The parameters for the function call</description>
          <targets>
            <target mandatory="No">
              <node name="Exprs" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
      </sons>
    </node>

<!--
  Node Typecast: 
 -->
    <node name="Typecast" >
      <description>Typecast</description>
    </node>

<!--
  Node Const: 
 -->
    <node name="Const" >
      <description>Constant</description>
      <sons>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node Block:
-->
    <node name="Block">
      <description>Represents (sequence of) statements, may be empty</description>
    </node>

<!--
 Node Assign:
-->
     <node name="Assign">
      <description>Represents assignment statement</description>
      <sons>
        <son name="Let">
          <description>Left hand side variable; can be missing to represent procedure calls</description>
          <targets>
            <target mandatory="no">
              <set name="Id" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Expr">
          <description>Right hand side expression</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node If:
-->
     <node name="If">
      <description>Represents if-else statement</description>
      <sons>
        <son name="Condition">
          <description>Represents the condition</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="IfBlock">
          <description>To be excuted if the condition is true</description>
          <targets>
            <target mandatory="yes">
              <set name="Block" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="ElseBlock">
          <description>Right hand side expression</description>
          <targets>
            <target mandatory="no">
              <set name="Block" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node While:
-->
     <node name="While">
      <description>Represents the while statement</description>
      <sons>
        <son name="Condition">
          <description>Represents the condition</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Block">
          <description>To be excuted while the condition is true</description>
          <targets>
            <target mandatory="yes">
              <set name="Block" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node Do:
-->
     <node name="Do">
      <description>Represents the do-while statement</description>
      <sons>
        <son name="Condition">
          <description>Represents the condition</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Block">
          <description>To be excuted until the condition becomes false</description>
          <targets>
            <target mandatory="yes">
              <set name="Block" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node For:
-->
     <node name="For">
      <description>Represents the for statement</description>
      <sons>
        <son name="Id">
          <description>The name of the counter variable</description>
          <targets>
            <target mandatory="yes">
              <node name="Id" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Start">
          <description>Represents the start value for the for-loop</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Finish">
          <description>Represents the finish value (exluded) for the for-loop</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Step">
          <description>Represents the step size for the for-loop</description>
          <targets>
            <target mandatory="no">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Block">
          <description>To be excuted until the condition becomes false</description>
          <targets>
            <target mandatory="yes">
              <set name="Block" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
    </node>

<!--
 Node Return:
-->  
    <node name="Return">
      <description>Represents return statement</description>
      <sons>
        <son name="Expr">
          <description>Represents the return expression</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node Exprs:
-->
     <node name="Exprs">
      <description>Represents (sequence of) expressions</description>
      <sons>
        <son name="Expr">
          <description>First expr in sequence</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Next">
          <description>Remaining expressions in sequence</description>
          <targets>
            <target mandatory="no">
              <node name="Exprs" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
  Node Expr:
-->
	<node name="Expr">
	</node>
	
<!--
 Node ArtihOp:
-->
    <node name="ArithOp">
      <description>Represents arithmatic operator application</description>
      <sons>
        <son name="Left">
          <description>Left operand expression</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Right">
          <description>Right operand expression</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Op">
          <description>Operator type</description>
          <type name="ArithOp">
            <targets>
              <target mandatory="yes">
                <any />
                <phases>
                  <all />
                </phases>
              </target>
            </targets>
          </type>
        </attribute>
      </attributes>
    </node>

<!--
 Node BinOp:
-->
    <node name="BinOp">
    </node>

<!--
 Node RelOp:
-->
    <node name="RelOp">
      <description>Represents relational operator application</description>
      <sons>
        <son name="Left">
          <description>Left operand expression</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Right">
          <description>Right operand expression</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Op">
          <description>Operator type</description>
          <type name="RelOp">
            <targets>
              <target mandatory="yes">
                <any />
                <phases>
                  <all />
                </phases>
              </target>
            </targets>
          </type>
        </attribute>
      </attributes>
    </node>

<!--
 Node LogicOp:
-->
    <node name="LogicOp">
      <description>Represents logical operator application</description>
      <sons>
        <son name="Left">
          <description>Left operand expression</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Right">
          <description>Right operand expression</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Op">
          <description>Operator type</description>
          <type name="LogicOp">
            <targets>
              <target mandatory="yes">
                <any />
                <phases>
                  <all />
                </phases>
              </target>
            </targets>
          </type>
        </attribute>
      </attributes>
    </node>

<!--
 Node UnOp:
-->
    <node name="UnOp">
      <description>Represents unary operator application</description>
      <sons>
        <son name="Right">
          <description>Right operand expression</description>
          <targets>
            <target mandatory="yes">
              <set name="Expr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Op">
          <description>Operator type</description>
          <type name="UnOp">
            <targets>
              <target mandatory="yes">
                <any />
                <phases>
                  <all />
                </phases>
              </target>
            </targets>
          </type>
        </attribute>
      </attributes>
    </node>
<!--
 Node Id:
-->
    <node name="Id">
      <description>Represents variable (identifier) in expression position</description>
      <sons>
      </sons>
      <attributes>
        <attribute name="Name">
        <description>Identifier in character string representation</description>
          <type name="String">
            <targets>
              <target mandatory="yes">
                <phases>
                  <all />
                </phases>
               </target>
            </targets>
          </type>
        </attribute>
        <attribute name="Decl">
        <description>Link to symbol table entry</description>
          <type name="Link">
            <targets>
              <target mandatory="no">
                <node name="SymbolTableEntry" />
                <phases>
                  <all />
                </phases>
              </target>
            </targets>
          </type>
        </attribute>
      </attributes>
    </node>

<!--
 Node Void:
-->
    <node name="Void">
      <description>Represents void return type</description>
      <sons>
      </sons>
      <attributes>
      </attributes>
    </node>
    
<!--
 Node Int:
-->
   <node name="IntConst">
      <description>Represents integer constant</description>
      <sons>
        <son name="Int">
          <description>Integer constant</description>
          <targets>
            <target mandatory="no">
              <node name="Int">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Value">
          <description>Value of integer</description>
          <type name="Int">
            <targets>
              <target mandatory="yes">
                 <phases>
                  <all />
                </phases>
             </target>
            </targets>
          </type>
        </attribute>
      </attributes>
    </node>
<!--
 Node Float:
-->
    <node name="FloatConst">
      <description>Represents floating point constant</description>
      <sons>
        <son name="Float">
          <description>Float constant</description>
          <targets>
            <target mandatory="no">
              <node name="Float">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Value">
          <description>Value of Float</description>
          <type name="Float">
            <targets>
              <target mandatory="yes">
              </target>
                 <phases>
                  <all />
                </phases>
            </targets>
          </type>
        </attribute>
      </attributes>
    </node>
<!--
 Node Bool:
-->
    <node name="BoolConst">
      <description>Represents Boolean constant (true/false)</description>
      <sons>
        <son name="Bool">
          <description>Bool constant</description>
          <targets>
            <target mandatory="no">
              <node name="Bool">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Value">
          <description>Value of Boolean</description>
          <type name="Bool">
            <targets>
              <target mandatory="yes">
                 <phases>
                  <all />
                </phases>
              </target>
            </targets>
          </type>
        </attribute>
      </attributes>
    </node>
    
<!--
 Node SymbolTableEntry:
-->
    <node name="SymbolTableEntry">
      <description>Represents symbol table entry</description>
      <sons>
      </sons>
      <attributes>
      </attributes>
    </node>

<!--
 Node Error:
-->
    <node name="Error">
      <description>Represents internal Error representation constructor</description>
      <sons>
        <son name="Next">
          <targets>
            <target mandatory="no" >
              <node name="Error" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="message">
          <type name="String">
            <targets>
              <target mandatory="yes">
                <phases>
                  <all />
                </phases>
               </target>
            </targets>
          </type>
        </attribute>
        <attribute name="anyphase">
          <type name="CompilerPhase">
            <targets>
              <target mandatory="yes">
                <phases>
                  <all />
                </phases>
               </target>
            </targets>
          </type>
        </attribute>
      </attributes>
      <flags></flags>
    </node>

<!--
  ===================== Extension 1 =====================
-->

<!--
  Node LocalFunDef:
-->
	<node name="LocalFunDef">
	  <description>Represents local function definition</description>
      <sons>
        <son name="FunHeader">
          <description>FunHeader</description>
          <targets>
            <target mandatory="yes">
              <node name="FunHeader">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
        <son name="FunBody">
          <description>Fun Body</description>
          <targets>
            <target mandatory="yes">
              <node name="FunBody">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
	</node>

<!--
  Node LocalFunDefs:
-->
	<node name="LocalFunDefs">
	  <description>Represents 0 or more local function definitions</description>
      <sons>
        <son name="LocalFunDef">
          <description>Represents local function definition</description>
          <targets>
            <target mandatory="no">
              <node name="LocalFunDef">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
        <son name="Next">
          <description>Represents next local function definition</description>
          <targets>
            <target mandatory="yes">
              <node name="LocalFunDefs">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
	</node>

<!--
  ===================== Extension 2 =====================
-->

<!--
  Node GlobalVarDef:
-->
	<node name="GlobalVarDef">
	  <sons>
        <son name="Type">
          <description>Type of variable</description>
          <targets>
            <target mandatory="yes">
              <node name="Type" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="Id">
          <description>Identifier of variable</description>
          <targets>
            <target mandatory="yes">
              <node name="Id" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="Expr">
          <description>Assignment of variable</description>
          <targets>
            <target mandatory="no">
              <node name="Expr" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Export">
            <description>Export keyword flag</description>
            <type name="Bool">
                <targets>
                    <target mandatory="yes">
                        <phases><all /></phases>
                    </target>
                </targets>
            </type>
        </attribute>
      </attributes>
	</node>

<!--
  Node GlobalArrDef:
-->	
  	<node name="GlobalArrDef">
      <sons>
        <son name="Type">
          <description>Type of variable</description>
          <targets>
            <target mandatory="yes">
              <node name="Type" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="ArraySize">
          <description>Size of array, multidimensional</description>
          <targets>
            <target mandatory="yes">
              <node name="Exprs" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="Id">
          <description>Identifier of variable</description>
          <targets>
            <target mandatory="yes">
              <node name="Id" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
        <son name="ArrExpr">
          <description>Assignment of array expression</description>
          <targets>
            <target mandatory="no">
              <node name="ArrExpr" />
              <phases>
                <all />
              </phases>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
        <attribute name="Export">
            <description>Export keyword flag</description>
            <type name="Bool">
                <targets>
                    <target mandatory="yes">
                        <phases><all /></phases>
                    </target>
                </targets>
            </type>
        </attribute>
      </attributes>
  	</node>

<!--
  Node ArrayExpr:
-->
    <node name="ArrExpr">
    </node>

<!--
  Node ArrayAssign:
-->
    <node name="ArrayAssign">
	  <description>Represents the assignment of an array</description>
      <sons>
        <son name="Id">
          <description>Represents the name of the array</description>
          <targets>
            <target mandatory="no">
              <node name="Id">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
        <son name="ArraySize">
          <description>Represents the size of the array, can be multidimensional</description>
          <targets>
            <target mandatory="yes">
              <node name="Exprs">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
        <son name="Expr">
          <description>Represents to be assigned expression</description>
          <targets>
            <target mandatory="yes">
              <node name="Expr">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
	</node>

<!--
  Node ArrData:
-->	
	<node name="ArrData">
	  <description>Represents the data of an array</description>
      <sons>
        <son name="ArrExprs">
          <description>Represents the elements of an array, at least one. Can be multidimensional</description>
          <targets>
            <target mandatory="yes">
              <node name="ArrExprs">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
      </sons>
    </node>
    
<!--
  Node Array:
-->
    <node name="Array">
	  <description>Represents the assignment of an array</description>
      <sons>
        <son name="Id">
          <description>Represents the name of the array</description>
          <targets>
            <target mandatory="no">
              <node name="Id">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
        <son name="Exprs">
          <description>Represents the index of the array</description>
          <targets>
            <target mandatory="no">
              <node name="Exprs">
                <phases>
                  <all />
                </phases>
              </node>
            </target>
          </targets>
        </son>
      </sons>
    </node>

<!--
  ===================== Extension 3 =====================
-->
<!--
  Node Ids:
-->
    <node name="Ids">
      <description>Represents (sequence of) identifiers</description>
      <sons>
        <son name="Id">
          <description>First identifier in sequence</description>
          <targets>
            <target mandatory="yes">
              <node name="Id" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Next">
          <description>Remaining identefiers in sequence</description>
          <targets>
            <target mandatory="no">
              <node name="Ids" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>
    
<!--
  Node ArrExprs:
-->
    <node name="ArrExprs">
      <description>Represents (sequence of) array expressions</description>
      <sons>
        <son name="ArrExpr">
          <description>First array expression in sequence</description>
          <targets>
            <target mandatory="yes">
              <node name="ArrExpr" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
        <son name="Next">
          <description>Remaining array expressions in sequence</description>
          <targets>
            <target mandatory="no">
              <node name="ArrExprs" />
                <phases>
                  <all />
                </phases>
             </target>
          </targets>
        </son>
      </sons>
      <attributes>
      </attributes>
    </node>
    
  </syntaxtree>

</definition>
  
